---
import BaseHead from '@/components/BaseHead.astro';
import Header from '@/components/Header.astro';
import Footer from '@/components/Footer.astro';
import { SITE_TITLE, SITE_DESCRIPTION } from '@/consts';
import FormattedDate from '@/components/FormattedDate.astro';

interface Props {
  posts: any[];
	currentPage: number,
	lastPage: number,
}

const { posts, currentPage = 1, lastPage = 1 } = Astro.props

---

<!doctype html>
<html lang="zh-Hant">
	<head>
		<BaseHead title={SITE_TITLE} description={SITE_DESCRIPTION} />
	</head>
	<body>
		<Header />
		<main>
			<section>
				<ul class="flex flex-col gap-[20px]">
					{
						posts.map(post => (
							<li>
								{/* <img class={ ` ${ index ? '!rounded-none' : '!mb-0 shrink-0 h-[400px] !w-[600px] object-cover' }` } src={post.data.heroImage} /> */}
								<div class="p-[20px] m-0 text-left box-border">
									<h4 class="p-0 m-0 font-bold">{post.data.title}</h4>
									<p class="p-0 m-0 line-clamp-2 text-[#000] text-[16px]">{ post.body || post.data.body }</p>
									<div class="flex justify-between items-center">
										<span class="text-[14px]">發表於 <FormattedDate date={post.data.pubDate} /></span>
										<a class="text-[#333] hover:underline hover:text-[#333] text-[16px]" href={`/post/${post.id}/`}>閱讀全文</a>
									</div>
								</div>
							</li>
						))
					}
				</ul>
			</section>
			<section class="mt-[20px]">
				<ul class="flex justify-center gap-[12px]">
					<li><a class={ `text-[#333] ${ currentPage <= 1 ? 'pointer-events-none': 'hover:underline hover:text-[#333]' }` } href={ `/page/${currentPage - 1}` }>prev</a></li>
					{
						Array.from({ length: lastPage }).map((_item, index) => (
							<li class="w-[20px] text-center" ><a class={ `text-[#333] ${ currentPage - 1 === index ? 'font-bold pointer-events-none': 'hover:underline hover:text-[#333]' }`  } href={ `/page/${index + 1}` }>{ index + 1 }</a></li>
						))
					}
					<li><a class={ `text-[#333] ${ currentPage >= lastPage ? 'pointer-events-none': 'hover:underline hover:text-[#333]' }` } href={ `/page/${currentPage + 1}` }>next</a></li>
				</ul>
			</section>
		</main>
		<Footer />
	</body>
</html>
